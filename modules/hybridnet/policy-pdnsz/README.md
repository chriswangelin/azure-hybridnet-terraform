

## Overview
Azure Policy definitions and assignments to automatically deploy private DNS zone records for newly created private endpoints.

By default, expects private DNS zones to reside the current subscription and creates policies in current subscription.
Policies may be created in a specific subscription or management group by setting the ```policy_subscription_id``` or ```policy_management_group_name```, respectively.
A specific subscription in which to locate the private DNS zones may also be specified via ```pdnsz_subscription_id```.
By default, this module aims to create policies for all sub resources listed on this page: https://docs.microsoft.com/en-us/azure/private-link/private-endpoint-dns
A subset of these policies can be created by specifying a subset of the polices in ```private_dns_zone_map```.

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | 3.7.0 |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_resource_group_name"></a> [resource\_group\_name](#input\_resource\_group\_name) | Resource group under which the policy assignment managed user identity will be created. | `string` | `"policy-rg"` | no |
| <a name="input_location"></a> [location](#input\_location) | Location of resource group under which the policy assignment managed user identity will be created. | `string` | `"eastus"` | no |
| <a name="input_policy_subscription_id"></a> [policy\_subscription\_id](#input\_policy\_subscription\_id) | Subscription that will own the policies. | `string` | `null` | no |
| <a name="input_pdnsz_subscription_id"></a> [pdnsz\_subscription\_id](#input\_pdnsz\_subscription\_id) | Subscription containing the private DNS zones to which the policies will add records. | `string` | `null` | no |
| <a name="input_policy_management_group_name"></a> [policy\_management\_group\_name](#input\_policy\_management\_group\_name) | Name of management group to which the policies will be assigned. | `string` | `null` | no |
| <a name="input_policy_assignment_identity_name"></a> [policy\_assignment\_identity\_name](#input\_policy\_assignment\_identity\_name) | Managed identity that will execute resource changes triggered by policies. | `string` | `"policy-assignment-identity"` | no |
| <a name="input_private_dns_zone_map"></a> [private\_dns\_zone\_map](#input\_private\_dns\_zone\_map) | n/a | `map(list(string))` | <pre>{<br>  "dine-adf-datafact-pdns": [<br>    "dataFactory",<br>    "privatelink.datafactory.azure.net"<br>  ],<br>  "dine-adf-portal-pdns": [<br>    "portal",<br>    "privatelink.adf.azure.com"<br>  ],<br>  "dine-aks-eus-pdns": [<br>    "management",<br>    "privatelink.eastus.azmk8s.io"<br>  ],<br>  "dine-appconfig-pdns": [<br>    "configurationStores",<br>    "privatelink.azconfig.io"<br>  ],<br>  "dine-arc-guest-pdns": [<br>    "hybridcompute",<br>    "privatelink.guestconfiguration.azure.com"<br>  ],<br>  "dine-arc-his-pdns": [<br>    "hybridcompute",<br>    "privatelink.his.arc.azure.com"<br>  ],<br>  "dine-automation-dsc-pdns": [<br>    "DSCAndHybridWorker",<br>    "privatelink.azure-automation.net"<br>  ],<br>  "dine-automation-wh-pdns": [<br>    "WebHook",<br>    "privatelink.azure-automation.net"<br>  ],<br>  "dine-backup-eus-pdns": [<br>    "AzureBackup",<br>    "privatelink.eastus.backup.windowsazure.com"<br>  ],<br>  "dine-batchacct-eus-pdns": [<br>    "batchAccount",<br>    "privatelink.eastus.batch.azure.com"<br>  ],<br>  "dine-cognitivesvcs-pdns": [<br>    "account",<br>    "privatelink.cognitiveservices.azure.com"<br>  ],<br>  "dine-containerreg-pdns": [<br>    "registry",<br>    "privatelink.azurecr.io"<br>  ],<br>  "dine-cosmos-cassand-pdns": [<br>    "Cassandra",<br>    "privatelink.cassandra.cosmos.azure.com"<br>  ],<br>  "dine-cosmos-gremlin-pdns": [<br>    "Gremlin",<br>    "privatelink.gremlin.cosmos.azure.com"<br>  ],<br>  "dine-cosmos-mongodb-pdns": [<br>    "MongoDB",<br>    "privatelink.mongo.cosmos.azure.com"<br>  ],<br>  "dine-cosmos-sql-pdns": [<br>    "Sql",<br>    "privatelink.documents.azure.com"<br>  ],<br>  "dine-cosmos-table-pdns": [<br>    "Table",<br>    "privatelink.table.cosmos.azure.com"<br>  ],<br>  "dine-dataexp-eus-pdns": [<br>    "kusto",<br>    "privatelink.eastus.kusto.windows.net"<br>  ],<br>  "dine-digitaltwins-pdns": [<br>    "digitalTwinsInstances",<br>    "privatelink.digitaltwins.azure.net"<br>  ],<br>  "dine-eventhub-pdns": [<br>    "namespace",<br>    "privatelink.servicebus.windows.net"<br>  ],<br>  "dine-evtgrid-domain-pdns": [<br>    "domain",<br>    "privatelink.eventgrid.azure.net"<br>  ],<br>  "dine-evtgrid-topic-pdns": [<br>    "topic",<br>    "privatelink.eventgrid.azure.net"<br>  ],<br>  "dine-filesync-pdns": [<br>    "afs",<br>    "privatelink.afs.azure.net"<br>  ],<br>  "dine-hdinsight-pdns": [<br>    "privatelink.azurehdinsight.net",<br>    "azurehdinsight.net"<br>  ],<br>  "dine-iothub-azdvc-pdns": [<br>    "iotHub",<br>    "privatelink.azure-devices.net"<br>  ],<br>  "dine-iothub-svcbus-pdns": [<br>    "iothub",<br>    "privatelink.servicebus.windows.net"<br>  ],<br>  "dine-keyvault-mghsm-pdns": [<br>    "managedHSMs",<br>    "privatelink.managedhsm.azure.net"<br>  ],<br>  "dine-keyvault-vault-pdns": [<br>    "vault",<br>    "privatelink.vaultcore.azure.net"<br>  ],<br>  "dine-machlearn-api-pdns": [<br>    "amlworkspace",<br>    "privatelink.api.azureml.ms"<br>  ],<br>  "dine-machlearn-note-pdns": [<br>    "amlworkspace",<br>    "privatelink.notebooks.azure.net"<br>  ],<br>  "dine-mariadb-pdns": [<br>    "mariadbServer",<br>    "privatelink.mariadb.database.azure.com"<br>  ],<br>  "dine-media-keydeliv-pdns": [<br>    "keydelivery",<br>    "privatelink.media.azure.net"<br>  ],<br>  "dine-media-liveevt-pdns": [<br>    "liveevent",<br>    "privatelink.media.azure.net"<br>  ],<br>  "dine-media-stream-pdns": [<br>    "streamingendpoint",<br>    "privatelink.media.azure.net"<br>  ],<br>  "dine-monitor-agt-pdns": [<br>    "azuremonitor",<br>    "privatelink.agentsvc.azure-automation.net"<br>  ],<br>  "dine-monitor-blob-pdns": [<br>    "azuremonitor",<br>    "privatelink.blob.core.windows.net"<br>  ],<br>  "dine-monitor-mon-pdns": [<br>    "azuremonitor",<br>    "privatelink.monitor.azure.com"<br>  ],<br>  "dine-monitor-ods-pdns": [<br>    "azuremonitor",<br>    "privatelink.ods.opinsights.azure.com"<br>  ],<br>  "dine-monitor-oms-pdns": [<br>    "azuremonitor",<br>    "privatelink.oms.opinsights.azure.com"<br>  ],<br>  "dine-mysql-pdns": [<br>    "mysqlServer",<br>    "privatelink.mysql.database.azure.com"<br>  ],<br>  "dine-postgres-pdns": [<br>    "postgresqlServer",<br>    "privatelink.postgres.database.azure.com"<br>  ],<br>  "dine-purview-acct-pdns": [<br>    "account",<br>    "privatelink.purview.azure.com"<br>  ],<br>  "dine-purview-portal-pdns": [<br>    "portal",<br>    "privatelink.purviewstudio.azure.com"<br>  ],<br>  "dine-redis-cache-pdns": [<br>    "redisCache",<br>    "privatelink.redis.cache.windows.net"<br>  ],<br>  "dine-redis-enter-pdns": [<br>    "redisEnterprise",<br>    "privatelink.redisenterprise.cache.azure.net"<br>  ],<br>  "dine-relay-pdns": [<br>    "namespace",<br>    "privatelink.servicebus.windows.net"<br>  ],<br>  "dine-search-pdns": [<br>    "searchService",<br>    "privatelink.search.windows.net"<br>  ],<br>  "dine-servicebus-pdns": [<br>    "namespace",<br>    "privatelink.servicebus.windows.net"<br>  ],<br>  "dine-signalr-pdns": [<br>    "signalR",<br>    "privatelink.service.signalr.net"<br>  ],<br>  "dine-sitereco-eus-pdns": [<br>    "AzureSiteRecovery",<br>    "privatelink.siterecovery.windowsazure.com"<br>  ],<br>  "dine-sqldb-pdns": [<br>    "sqlServer",<br>    "privatelink.database.windows.net"<br>  ],<br>  "dine-storage-blobs-pdns": [<br>    "blob_secondary",<br>    "privatelink.blob.core.windows.net"<br>  ],<br>  "dine-storage-dfs-pdns": [<br>    "dfs",<br>    "privatelink.dfs.core.windows.net"<br>  ],<br>  "dine-storage-dfss-pdns": [<br>    "dfs_secondary",<br>    "privatelink.dfs.core.windows.net"<br>  ],<br>  "dine-storage-file-pdns": [<br>    "file",<br>    "privatelink.file.core.windows.net"<br>  ],<br>  "dine-storage-files-pdns": [<br>    "file_secondary",<br>    "privatelink.file.core.windows.net"<br>  ],<br>  "dine-storage-queue-pdns": [<br>    "queue",<br>    "privatelink.queue.core.windows.net"<br>  ],<br>  "dine-storage-queues-pdns": [<br>    "queue_secondary",<br>    "privatelink.queue.core.windows.net"<br>  ],<br>  "dine-storage-table-pdns": [<br>    "table",<br>    "privatelink.table.core.windows.net"<br>  ],<br>  "dine-storage-tables-pdns": [<br>    "table_secondary",<br>    "privatelink.table.core.windows.net"<br>  ],<br>  "dine-storage-web-pdns": [<br>    "web",<br>    "privatelink.web.core.windows.net"<br>  ],<br>  "dine-storage-webs-pdns": [<br>    "web_secondary",<br>    "privatelink.web.core.windows.net"<br>  ],<br>  "dine-storoge-blob-pdns": [<br>    "blob",<br>    "privatelink.blob.core.windows.net"<br>  ],<br>  "dine-synapse-dev-pdns": [<br>    "Dev",<br>    "privatelink.dev.azuresynapse.net"<br>  ],<br>  "dine-synapse-sql-pdns": [<br>    "Sql",<br>    "privatelink.sql.azuresynapse.net"<br>  ],<br>  "dine-synapse-sqlod-pdns": [<br>    "SqlOnDemand",<br>    "privatelink.sql.azuresynapse.net"<br>  ],<br>  "dine-synapse-web-pdns": [<br>    "Web",<br>    "privatelink.azuresynapse.net"<br>  ],<br>  "dine-webapps-pdns": [<br>    "sites",<br>    "privatelink.azurewebsites.net"<br>  ]<br>}</pre> | no |

## Outputs

No outputs.
